<html>
<head>
  <title>九、Python模块和包</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/6.1.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="692"/>
<h1>九、Python模块和包</h1>

<div>
<span><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体;">十五、</span><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体; font-weight: bold;">模块和包 </span></div><div><span style="font-size: 16pt; font-family: 楷体;">#Python的程序由包（package）、模块（module）和函数组成。包是由一系列模块组成的集合。模块是处理某一类问题的函数和类的集合。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">包就是一个完成特定任务的工具箱，Python提供了许多有用的工具包，如字符串处理、图形用户接口、Web应用、图形图像处理等。这些自带的工具包和模块安装在Python的安装目录下的Lib子目录中。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">注意：</span></div><div><span style="font-size: 16pt; font-family: 楷体;">包必须至少含有一个__int__.py文件按，该文件的内容可以为空。__int__.py用于标识当前文件夹是一个包。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">模块 </span></div><div><span style="font-size: 16pt; font-family: 楷体;">在python中一个文件可以被看成一个独立模块，而包对应着文件夹，模块把python代码分成一些有组织的代码段，通过导入的方式实现代码重用。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">导入模块时，是按照sys.path变量的值搜索模块，sys.path的值是包含每一个独立路径的列表，包含当前目录、python安装目录、PYTHONPATH环境变量，搜索顺序按照路径在列表中的顺序（一般当前目录优先级最高）。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">想看自己的Python路径，大家可以</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import sys</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(sys.path)</span></div><div><span style="font-size: 16pt; font-family: 楷体;">如果你发现你在某个地方写的文件（包）import错误，你就可以看看这个sys.path是否囊括了你那批文件的根目录。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import sys</span></div><div><span style="font-size: 16pt; font-family: 楷体;">print(sys.path)</span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体; font-weight: bold;">#导入模块</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">使用import语句（不管是你自己写的，还是你下载的别人的）</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import module1</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import module2</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import module3</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import module1,module2,module3</span></div><div><span style="font-size: 16pt; font-family: 楷体;">这两种方式的效果是一样的，但是第一种可读性比第二种好，推荐按照下面的顺序导入模块，并且一般在文件首部导入所有的模块</span></div><div><span style="font-size: 16pt; color: rgb(77, 206, 29); font-family: 楷体;">python标准库</span></div><div><span style="font-size: 16pt; color: rgb(77, 206, 29); font-family: 楷体;">第三方模块</span></div><div><span style="font-size: 16pt; color: rgb(77, 206, 29); font-family: 楷体;">应用程序自定义模块</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">#使用from-import语句导入模块的属性</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from module import name1,name2,name3</span></div><div><span style="font-size: 16pt; font-family: 楷体;">多行导入</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from module import name1,name2,name3</span></div><div><span style="font-size: 16pt; font-family: 楷体;">导入全部属性（由于容易覆盖当前名称空间中现有的名字，所以一般不推荐使用，适合模块中变量名很长并且变量很多的情况）</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from module import *</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体; font-weight: bold;">#自定义导入模块名称</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">就是为了用的时候方便好记。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">import simplejson as json</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; color: rgb(255, 0, 0); font-family: 楷体; font-weight: bold;">#包</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div><div><span style="font-size: 16pt; font-family: 楷体;">包将有联系的模块组织在一起，有效避免模块名称冲突问题，让应用组织结构更加清晰。 一个普通的python应用程序目录结构：</span></div><div><span style="font-size: 16pt; font-family: 楷体;">app/</span></div><div><span style="font-size: 16pt; font-family: 楷体;">__init__.py</span></div><div><span style="font-size: 16pt; font-family: 楷体;">a/</span></div><div><span style="font-size: 16pt; font-family: 楷体;">__init__.py</span></div><div><span style="font-size: 16pt; font-family: 楷体;">a.py</span></div><div><span style="font-size: 16pt; font-family: 楷体;">b/</span></div><div><span style="font-size: 16pt; font-family: 楷体;">__init__.py</span></div><div><span style="font-size: 16pt; font-family: 楷体;">b.py</span></div><div><span style="font-size: 16pt; font-family: 楷体;">app是最顶层的包，a和b是它的子包，可以这样导入：</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from app.a import a #导入app包的</span><span style="font-size: 16pt; font-family: 楷体;">子包</span><span style="font-size: 16pt; font-family: 楷体;">a</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from app.b.b import test    #导入app包的子包b中的属性test</span></div><div><span style="font-size: 16pt; font-family: 楷体;">a.test()</span></div><div><span style="font-size: 16pt; font-family: 楷体;">test()</span></div><div><span style="font-size: 16pt; font-family: 楷体;">上面代码表示：导入app包的子包a和子包b的属性test，然后分别调用test方法。</span></div><div><span style="font-size: 16pt; font-family: 楷体;">每个目录下都有__init__.py文件，这个是初始化模块，from-import语句导入子包时需要它，可以在里面做一些初始化工作，也可以是空文件。ps：__init__.py定义的属性直接使用 顶层包.子包 的方式导入，如在目录a的__init__.py文件中定义init_db()方法，调用如下：</span></div><div><span style="font-size: 16pt; font-family: 楷体;">from app import a</span></div><div><span style="font-size: 16pt; font-family: 楷体;">a.init_db()</span></div><div><span style="font-size: 16pt; font-family: 楷体;">'''</span></div></span>
</div></body></html> 